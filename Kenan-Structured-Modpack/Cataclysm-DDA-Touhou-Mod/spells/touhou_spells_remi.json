[
  {
    "id": "remilia_bloodboil",
    "type": "SPELL",
    "name": { "str": "Blood boil" },
    "description": "Force the blood of your enemies to momentarily reach boiling point, dealing internal damage and dazing them.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ground", "hostile" ],
    "ignored_monster_species": [ "HALLUCINATION", "HORROR", "NETHER_EMANATION" ],
    "effect": "attack",
    "effect_str": "dazed",
    "shape": "blast",
    "damage_type": "stab",
    "min_damage": { "math": [ "( (u_skill('stabbing') * 4.66 ) + (u_skill('melee') * 4.66 ) + (u_skill('dodge') * 4.66 ) - 20.92 )" ] },
    "max_damage": 175,
    "min_aoe": { "math": [ "( (u_skill('stabbing') * 0.133 ) + (u_skill('melee') * 0.133 ) + (u_skill('dodge') * 0.133 ) + 0.404 )" ] },
    "max_aoe": 6,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 166,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "This should affect things with internal fluids, which include the living, unliving and robots",
    "//2": "min dmg 35, min aoe 2"
  },
  {
    "id": "remilia_darkdrain",
    "type": "SPELL",
    "name": { "str": "Dark drain" },
    "description": "Forcefully take away the life essence of the target.  If the target is a human or close enough, it also <color_light_green>heals</color> and <color_light_red>feeds</color> you as if you drank their blood.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ally", "hostile" ],
    "ignored_monster_species": [ "HALLUCINATION", "HORROR", "NETHER_EMANATION", "ROBOT" ],
    "effect": "attack",
    "extra_effects": [ { "id": "remilia_darkdrain2" }, { "id": "remilia_darkdrain3" } ],
    "shape": "blast",
    "damage_type": "stab",
    "min_damage": { "math": [ "( (u_skill('stabbing') * 1.33 ) + (u_skill('melee') * 1.33 ) + (u_skill('dodge') * 1.33 ) + 4.04 )" ] },
    "max_damage": 60,
    "min_range": { "math": [ "( (u_skill('stabbing') * 0.133 ) + (u_skill('melee') * 0.133 ) + (u_skill('dodge') * 0.133 ) + 2.404 )" ] },
    "max_range": 8,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "EXTRA_EFFECTS_FIRST", "NO_LEGS", "SOMATIC" ],
    "//": "min dmg 20, min range 8",
    "//2": "Behaves different than remilia_bloodboil . First, it affects living 'matter', then the EOC checks for heal/feed compability",
    "//3": "Optimally the self-heal/feed should be a function of the damage done, not the damage formula at the level. But I'm still figuring out _damage stuff, plus that's kind of a nerf to the ability"
  },
  {
    "id": "remilia_darkdrain2",
    "type": "SPELL",
    "name": { "str": "Dark drain (EOC) (enemy)" },
    "description": "Forces the EOC upon the target, which check which species it is and sets var_remidrain accordingly",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "effect_on_condition",
    "effect_str": "remilia_darkdrain2_eoc",
    "shape": "blast",
    "max_level": 1,
    "min_range": { "math": [ "( (u_skill('stabbing') * 0.133 ) + (u_skill('melee') * 0.133 ) + (u_skill('dodge') * 0.133 ) + 2.404 )" ] },
    "max_range": 8,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ],
    "//2": "min range 8"
  },
  {
    "id": "remilia_darkdrain3",
    "type": "SPELL",
    "name": { "str": "Dark drain (EOC) (self)" },
    "description": "Hidden spell to run a self EOC that heals after 3 s",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "remilia_darkdrain3_eoc",
    "shape": "blast",
    "max_level": 1,
    "min_aoe": 16,
    "max_aoe": 16,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ],
    "//2": "min range 8"
  },
  {
    "id": "remilia_darkdrain4",
    "type": "SPELL",
    "name": { "str": "Dark drain (self heal)" },
    "description": "Self heal component of remilia_darkdrain ",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "shape": "blast",
    "max_level": 1,
    "damage_type": "pure",
    "min_damage": { "math": [ "( - var_remidrain )" ] },
    "max_damage": -60,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "remilia_demonfork",
    "type": "SPELL",
    "name": { "str": "Demons' dinner fork" },
    "description": "Summon several spears of red magic to stab in front of you.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "remilia_demonfork2" } ],
    "shape": "cone",
    "damage_type": "stab",
    "min_damage": { "math": [ "( (u_skill('stabbing') * 0.133 ) + (u_skill('melee') * 0.133 ) + (u_skill('dodge') * 0.133 ) + 2.404 )" ] },
    "max_damage": 8,
    "min_range": { "math": [ "( (u_skill('throw') * 0.4 + 1.4 ) )" ] },
    "max_range": 7,
    "min_aoe": 60,
    "max_aoe": 60,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_LEGS", "SOMATIC", "WONDER" ],
    "//": "This works by repeatedly casting the cone, ideally it should cast several diverging lines instead",
    "//2": "min dmg 4, min range 3",
    "//3": "Add vfx to replace the 4 - 8 aoes she causes with a single cast"
  },
  {
    "id": "remilia_demonfork2",
    "type": "SPELL",
    "name": { "str": "Demons' dinner fork (forks)" },
    "description": "Damage component for remilia_demonfork ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "cone",
    "damage_type": "stab",
    "min_damage": { "math": [ "( (u_skill('stabbing') * 0.1 ) + (u_skill('melee') * 0.1 ) + (u_skill('dodge') * 0.1 ) + 7.8 )" ] },
    "max_damage": 12,
    "min_range": { "math": [ "( (u_skill('throw') * 0.4 + 1.4 ) )" ] },
    "max_range": 7,
    "min_aoe": 60,
    "max_aoe": 60,
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "min dmg 9"
  },
  {
    "id": "remilia_gungnir",
    "type": "SPELL",
    "name": { "str": "Spear the <color_magenta>Gungnir</color>" },
    "description": "Summon the legendary spear.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "remilia_gungnir_eoc",
    "shape": "blast",
    "min_duration": { "math": [ "( (u_skill('stabbing') * 2100 ) + (u_skill('melee') * 2100 ) + 1200 )" ] },
    "max_duration": 60000,
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 100,
    "base_energy_cost": 133,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "min dur 18000"
  },
  {
    "id": "remilia_gungnir2",
    "type": "SPELL",
    "name": { "str": "Spear the Gungnir (item)" },
    "description": "Item spawn component of remilia_gungnir ",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "none" ],
    "effect": "spawn_item",
    "effect_str": "remilia_gungnir2",
    "shape": "blast",
    "min_duration": { "math": [ "( (u_skill('stabbing') * 2100 ) + (u_skill('melee') * 2100 ) + 1200 )" ] },
    "max_duration": 60000,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "remilia_gungnir_dismiss",
    "type": "SPELL",
    "name": { "str": "Dismiss the <color_magenta>Gungnir</color>" },
    "description": "Dismiss your spear, refunding some spiritual energy.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "remilia_gungnir_dismiss_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 33,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "remilia_gungnir_throw",
    "type": "SPELL",
    "name": { "str": "Throw <color_magenta>Gungnir</color>" },
    "description": "Throw the divine spear, causing direct damage to the target and minor to those who are close to it.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ally", "ground", "hostile" ],
    "components": "spell_components_gungnir",
    "effect": "attack",
    "extra_effects": [ { "id": "remilia_gungnir_throw2" }, { "id": "remilia_gungnir_throw3", "hit_self": true } ],
    "shape": "blast",
    "damage_type": "stab",
    "min_damage": { "math": [ "( (u_skill('stabbing') * 12 ) + (u_skill('melee') * 12 ) - 56 )" ] },
    "max_damage": 280,
    "min_range": { "math": [ "( (u_skill('throw') * 4.8 ) - 3.2 )" ] },
    "max_range": 64,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 200,
    "base_energy_cost": 66,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "min dmg 40, min range 16"
  },
  {
    "id": "remilia_gungnir_throw2",
    "type": "SPELL",
    "name": { "str": "Throw Gungnir (aoe component)" },
    "description": "AoE damage component for throw_gungnir ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "soul",
    "min_damage": { "math": [ "( (u_skill('stabbing') * 6 ) + (u_skill('melee') * 6 ) - 28 )" ] },
    "max_damage": 140,
    "min_aoe": { "math": [ "( (u_skill('throw') * 0.3 ) - 0.2 )" ] },
    "max_aoe": 4,
    "field_id": "fd_blood2",
    "field_chance": 3,
    "min_field_intensity": 1,
    "max_field_intensity": 3,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "LOUD", "NO_LEGS" ],
    "//": "min dmg 20, min aoe 1"
  },
  {
    "id": "remilia_gungnir_throw3",
    "type": "SPELL",
    "name": { "str": "Throw Gungnir (reset timer)" },
    "description": "Resets var_gungnir ",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "remilia_gungnir_timer_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -50,
    "message": "",
    "base_casting_time": 33,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "remilia_miserablefate",
    "type": "SPELL",
    "name": { "str": "Miserable Fate" },
    "description": "Summon ethereal chains, stunning enemies caught on it for a short time.  Deals a small amount of physical damage.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "remilia_miserablefate2" } ],
    "shape": "blast",
    "damage_type": "stab",
    "min_damage": { "math": [ "( (u_skill('stabbing') * 1.5 ) + (u_skill('melee') * 1.5 ) + 3 )" ] },
    "max_damage": 45,
    "min_range": 6,
    "max_range": 6,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 66,
    "base_energy_cost": 200,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "Overall dmg to rely on the stun component",
    "//2": "min dmg 15"
  },
  {
    "id": "remilia_miserablefate2",
    "type": "SPELL",
    "name": { "str": "Miserable Fate (stun)" },
    "description": "Stun component for remilia_miserablefate ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "mod_moves",
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": { "math": [ "( - (u_skill('stabbing') * 30 ) - (u_skill('melee') * 30 ) - 60 )" ] },
    "max_damage": -900,
    "min_aoe": 3,
    "max_aoe": 3,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS" ],
    "//": "min dmg -300"
  },
  {
    "id": "remilia_vampiricaura",
    "type": "SPELL",
    "name": { "str": "Vampiric aura" },
    "description": "Unleash your vampiric aura, increasing your melee attack and granting on hit <color_light_green>healing</color>.  This leaves you vulnerable by reducing your defenses, however.  Deactivates if you wield any item.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "remilia_vampiricaura_eoc",
    "shape": "blast",
    "min_duration": { "math": [ "( (u_skill('stabbing') * 300 ) + (u_skill('melee') * 300 ) + 3600 )" ] },
    "max_duration": 12000,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC", "NO_PROJECTILE" ],
    "//": "Mix between Vampire Claw and Millennium Vampire",
    "//2": "min dur 6000"
  },
  {
    "id": "remilia_vampiricaura2",
    "type": "SPELL",
    "name": { "str": "Vampiric aura (effect)" },
    "description": "Grants the actual aura effect, run by the EOC above",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "effect_str": "aura_vampiric",
    "shape": "blast",
    "min_duration": { "math": [ "( (u_skill('stabbing') * 300 ) + (u_skill('melee') * 300 ) + 3600 )" ] },
    "max_duration": 12000,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC", "NO_PROJECTILE" ]
  },
  {
    "id": "vampiric_drain_spell",
    "type": "SPELL",
    "name": { "str": "Vampiric DRAIN" },
    "description": "Heal component for remilia_vampiricaura ",
    "spell_class": "NONE",
    "effect": "attack",
    "valid_targets": [ "self" ],
    "affected_body_parts": [ "arm_l", "arm_r", "head", "leg_l", "leg_r", "torso" ],
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": { "math": [ "( - var_remidrain )" ] },
    "max_damage": { "math": [ "( - var_remidrain )" ] },
    "max_level": 1,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_LEGS", "RANDOM_DAMAGE", "SILENT" ],
    "//": "max dmg (heal) 6 - 16, based on the damage done by aura_vampiric , which is checked and stored by vampiric_drain_eoc "
  }
]
