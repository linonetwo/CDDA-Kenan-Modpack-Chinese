[
  {
    "id": "kokoro_spin",
    "type": "SPELL",
    "name": { "str": "Spin attack (tec)" },
    "description": "Damage component for tec_kokoro_spin ",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "bash",
    "min_damage": { "math": [ "( ( var_melee_phys_dmg * 0.9 ) * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( ( var_melee_phys_dmg * 1.3 ) * var_kokoro_anger_mod )" ] },
    "min_aoe": 2,
    "max_aoe": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE" ],
    "//": "dmg is ~1.1x weapon dmg",
    "//2": "The anger modifier is set at kokoro_opens_spellbook_eoc "
  },
  {
    "id": "kokoro_sweep",
    "type": "SPELL",
    "name": { "str": "Sweep (tec)" },
    "description": "Damage component for tec_kokoro_sweep ",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "shape": "cone",
    "damage_type": "bash",
    "min_damage": { "math": [ "( ( var_melee_phys_dmg * 1.1 ) * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( ( var_melee_phys_dmg * 1.3 ) * var_kokoro_anger_mod )" ] },
    "min_range": 2,
    "max_range": 2,
    "min_aoe": 90,
    "max_aoe": 90,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE" ],
    "//": "dmg is ~1.2x weapon dmg",
    "//2": "The anger modifier is set at kokoro_opens_spellbook_eoc "
  },
  {
    "id": "kokoro_switch",
    "type": "SPELL",
    "name": { "str": "Switch attack (tec)" },
    "description": "Damage component for tec_kokoro_switch ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kokoro_switch2" } ],
    "shape": "blast",
    "damage_type": "stab",
    "min_damage": { "math": [ "( ( var_melee_phys_dmg * 0.9 ) * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( ( var_melee_phys_dmg * 1.3 ) * var_kokoro_anger_mod )" ] },
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "EXTRA_EFFECTS_FIRST", "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE" ],
    "//": "dmg is ~1.1x weapon dmg",
    "//2": "The anger modifier is set at kokoro_opens_spellbook_eoc "
  },
  {
    "id": "kokoro_switch2",
    "type": "SPELL",
    "name": { "str": "Switch attack (tec) (swap)" },
    "description": "Swap position component for tec_kokoro_switch ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "pure",
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SWAP_POS" ],
    "//": "The SWAP_POS subspell has to be separated from the primary else it crashes the game, because the dmg can kill the target and it cannot swap (my guess)"
  },
  {
    "id": "kokoro_mask_boost",
    "type": "SPELL",
    "name": { "str": "<color_white>Mask:</color> Boost" },
    "description": "<color_light_gray><color_white>Boost</color> the effects granted by the current mask, and reset its duration <color_light_red>(adds instability)</color>.  Cast again to return the mask to its <color_white>normal</color> state.</color>",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kokoro_mask_boost_eoc_1",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 50,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kokoro_mask_swap",
    "type": "SPELL",
    "name": { "str": "<color_white>Mask:</color> Swap" },
    "description": "<color_light_gray><color_white>Swap</color> the current mask for a random one, and reset its duration <color_light_red>(adds instability)</color>.</color>",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "teachable": false,
    "effect": "effect_on_condition",
    "effect_str": "kokoro_mask_swap_eoc_1",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 50,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kokoro_mask_neutral",
    "type": "SPELL",
    "name": { "str": "<color_white>Mask:</color> Unequip" },
    "description": "<color_light_gray>Temporarely <color_white>unequip</color> all masks <color_light_red>(adds instability)</color>.  Cast again to re-equip a <color_white>random</color> mask.</color>",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kokoro_mask_neutral_eoc_1",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 50,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "NO_PROJECTILE" ]
  },
  {
    "id": "kokoro_backsweep",
    "type": "SPELL",
    "name": { "str": "Backsweep" },
    "description": "<color_light_gray>Infuse your weapon with spiritual energy and sweep in front of you, dealing damage and pulling enemies towards your position.  Requires a 2h weapon.</color>",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kokoro_backsweep_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": { "math": [ "( 100 * var_kokoro_happiness_mod )" ] },
    "base_energy_cost": { "math": [ "( 133 * var_kokoro_happiness_mod )" ] },
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "kokoro_backsweep2_bash",
    "type": "SPELL",
    "name": { "str": "Backsweep (bash)" },
    "description": "Infuse your weapon with spiritual energy and sweep in front of you, dealing damage and pulling enemies towards your position.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kokoro_backsweep3" } ],
    "shape": "cone",
    "damage_type": "bash",
    "min_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.065 ) + (u_skill('dodge') * 0.065 ) + 0.38 ) ) * 0.95 * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.065 ) + (u_skill('dodge') * 0.065 ) + 0.38 ) ) * 1.05 * var_kokoro_anger_mod )" ] },
    "min_range": { "math": [ "( 4 + var_kokoro_determination + var_kokoro_determination_boost * 2 )" ] },
    "max_range": 6,
    "min_aoe": 90,
    "max_aoe": 90,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "EXTRA_EFFECTS_FIRST", "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//2": "Deals x0.9 - 2.2 weapon dmg with ± 5% variance",
    "//3": "anger stance mod ~1.2, anger stance boosted mod ~1.35 "
  },
  {
    "id": "kokoro_backsweep2_cut",
    "type": "SPELL",
    "name": { "str": "Backsweep (cut)" },
    "description": "Infuse your weapon with spiritual energy and sweep in front of you, dealing damage and pulling enemies towards your position.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kokoro_backsweep3" } ],
    "shape": "cone",
    "damage_type": "cut",
    "min_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.065 ) + (u_skill('dodge') * 0.065 ) + 0.38 ) ) * 0.95 * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.065 ) + (u_skill('dodge') * 0.065 ) + 0.38 ) ) * 1.05 * var_kokoro_anger_mod )" ] },
    "min_range": { "math": [ "( 4 + var_kokoro_determination + var_kokoro_determination_boost * 2 )" ] },
    "max_range": 6,
    "min_aoe": 90,
    "max_aoe": 90,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "EXTRA_EFFECTS_FIRST", "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//2": "Deals x0.9 - 2.2 weapon dmg with ± 5% variance",
    "//3": "anger stance mod ~1.2, anger stance boosted mod ~1.35 "
  },
  {
    "id": "kokoro_backsweep2_stab",
    "type": "SPELL",
    "name": { "str": "Backsweep (stab)" },
    "description": "Infuse your weapon with spiritual energy and sweep in front of you, dealing damage and pulling enemies towards your position.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kokoro_backsweep3" } ],
    "shape": "cone",
    "damage_type": "stab",
    "min_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.065 ) + (u_skill('dodge') * 0.065 ) + 0.38 ) ) * 0.95 * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.065 ) + (u_skill('dodge') * 0.065 ) + 0.38 ) ) * 1.05 * var_kokoro_anger_mod )" ] },
    "min_range": { "math": [ "( 4 + var_kokoro_determination + var_kokoro_determination_boost * 2 )" ] },
    "max_range": 6,
    "min_aoe": 90,
    "max_aoe": 90,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "EXTRA_EFFECTS_FIRST", "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//2": "Deals x0.9 - 2.2 weapon dmg with ± 5% variance",
    "//3": "anger stance mod ~1.2, anger stance boosted mod ~1.35 "
  },
  {
    "id": "kokoro_backsweep3",
    "type": "SPELL",
    "name": { "str": "Backsweep (pull)" },
    "description": "Pull component for kokoro_backsweep ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "directed_push",
    "shape": "cone",
    "damage_type": "pure",
    "min_damage": { "math": [ "( - 3 - var_kokoro_determination - var_kokoro_determination_boost * 2 )" ] },
    "max_damage": -6,
    "min_range": { "math": [ "( 4 + var_kokoro_determination + var_kokoro_determination_boost * 2 )" ] },
    "max_range": 6,
    "min_aoe": 90,
    "max_aoe": 90,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT", "SOMATIC" ]
  },
  {
    "id": "kokoro_quick_attack",
    "type": "SPELL",
    "name": { "str": "Quick attack" },
    "description": "<color_light_gray>Attack repeatedly in front of you.  Requires a compatible weapon.</color>",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kokoro_quick_attack_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": { "math": [ "( 85 * var_kokoro_happiness_mod )" ] },
    "base_energy_cost": { "math": [ "( 133 * var_kokoro_happiness_mod )" ] },
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "kokoro_quick_attack2_bash",
    "type": "SPELL",
    "name": { "str": "Quick attack (bash)" },
    "description": "Attack repeatedly in front of you.  Requires a compatible weapon.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kokoro_quick_attack3_bash" } ],
    "shape": "line",
    "min_damage": 3,
    "max_damage": { "math": [ "( 3 + var_kokoro_determination + var_kokoro_determination_boost )" ] },
    "min_range": 2,
    "max_range": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC", "RANDOM_DAMAGE", "WONDER" ]
  },
  {
    "id": "kokoro_quick_attack3_bash",
    "type": "SPELL",
    "name": { "str": "Quick attack (dmg)" },
    "description": "Damage component for kokoro_quick_attack ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "cone",
    "damage_type": "bash",
    "min_damage": { "math": [ "( ( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.065 ) + (u_skill('dodge') * 0.065 ) + 0.38 ) ) / 3 ) * 0.95 * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( ( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.065 ) + (u_skill('dodge') * 0.065 ) + 0.38 ) ) / 3 ) * 1.05 * var_kokoro_anger_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//2": "Total x0.9 - 2.2 weapon dmg ± 5% variance",
    "//3": "determination stance adds +1 repeat, total x1.2 - 2.93 weapon dmg",
    "//4": "anger stance mod ~1.2, anger stance boosted mod ~1.35 "
  },
  {
    "id": "kokoro_quick_attack2_cut",
    "type": "SPELL",
    "name": { "str": "Quick attack (cut)" },
    "description": "Attack repeatedly in front of you.  Requires a compatible weapon.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kokoro_quick_attack3_bash" } ],
    "shape": "line",
    "min_damage": 3,
    "max_damage": { "math": [ "( 3 + var_kokoro_determination + var_kokoro_determination_boost )" ] },
    "min_range": 2,
    "max_range": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC", "RANDOM_DAMAGE", "WONDER" ]
  },
  {
    "id": "kokoro_quick_attack3_cut",
    "type": "SPELL",
    "name": { "str": "Quick attack (cut)" },
    "description": "Damage component for kokoro_quick_attack ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "cone",
    "damage_type": "cut",
    "min_damage": { "math": [ "( ( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.08 ) + (u_skill('dodge') * 0.08 ) + 0.26 ) ) / 3 ) * 0.95 * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( ( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.08 ) + (u_skill('dodge') * 0.08 ) + 0.26 ) ) / 3 ) * 1.05 * var_kokoro_anger_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//2": "Total x0.9 - 2.2 weapon dmg ± 5% variance",
    "//3": "determination stance adds +1 repeat, total x1.2 - 2.93 weapon dmg",
    "//4": "anger stance mod ~1.2, anger stance boosted mod ~1.35 "
  },
  {
    "id": "kokoro_quick_attack2_stab",
    "type": "SPELL",
    "name": { "str": "Quick attack (stab)" },
    "description": "Attack repeatedly in front of you.  Requires a compatible weapon.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "kokoro_quick_attack3_bash" } ],
    "shape": "line",
    "min_damage": 3,
    "max_damage": { "math": [ "( 3 + var_kokoro_determination + var_kokoro_determination_boost )" ] },
    "min_range": 2,
    "max_range": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC", "RANDOM_DAMAGE", "WONDER" ]
  },
  {
    "id": "kokoro_quick_attack3_stab",
    "type": "SPELL",
    "name": { "str": "Quick attack (dmg)" },
    "description": "Damage component for kokoro_quick_attack ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "cone",
    "damage_type": "stab",
    "min_damage": { "math": [ "( ( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.08 ) + (u_skill('dodge') * 0.08 ) + 0.26 ) ) / 3 ) * 0.95 * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( ( ( var_melee_phys_dmg * ( (u_skill('melee') * 0.08 ) + (u_skill('dodge') * 0.08 ) + 0.26 ) ) / 3 ) * 1.05 * var_kokoro_anger_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//2": "Total x0.9 - 2.2 weapon dmg ± 5% variance",
    "//3": "determination stance adds +1 repeat, total x1.2 - 2.93 weapon dmg",
    "//4": "anger stance multiplier ~1.2, anger stance boosted multiplier ~1.35 "
  },
  {
    "id": "kokoro_shouting_gspider",
    "type": "SPELL",
    "name": { "str": "Shouting giant spider mask" },
    "description": "<color_light_gray>Temporarely equip your Shouting Giant Spider mask and unleash webs in front of you, slowing down enemies.</color>",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ground", "hostile" ],
    "effect": "attack",
    "shape": "cone",
    "min_range": 5,
    "max_range": 5,
    "min_aoe": 90,
    "max_aoe": 90,
    "min_duration": { "math": [ "( ( ( (u_skill('melee') * 60 ) + (u_skill('dodge') * 60 ) + 720 ) ) * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 2400 * var_kokoro_melancholy_mod )" ] },
    "field_id": "fd_web3",
    "field_chance": 1,
    "min_field_intensity": 1,
    "max_field_intensity": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": { "math": [ "( 100 * var_kokoro_happiness_mod )" ] },
    "base_energy_cost": { "math": [ "( 100 * var_kokoro_happiness_mod )" ] },
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "Shouldn't hit flying targets or be activated without ground. Should be castable with a single free hand",
    "//2": "dur 1200 - 2400",
    "//3": "melancholy mod adds between +33 and +66% duration",
    "//WIP": "Kokoro isn't immune to the webs"
  },
  {
    "id": "kokoro_spirit_naginata",
    "type": "SPELL",
    "name": { "str": "Summon: <color_cyan>Spirit naginata</color>" },
    "description": "<color_light_gray>Spend some spiritual power to briefly materialize it into a naginata.  This is a 2h weapon, so you require both hands to use it.</color>",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kokoro_spirit_naginata_eoc",
    "shape": "blast",
    "min_duration": { "math": [ "( ( (u_skill('stabbing') * 90 ) + (u_skill('melee') * 90 ) + 240 ) * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 2400 * var_kokoro_melancholy_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": { "math": [ "( 66 * var_kokoro_happiness_mod )" ] },
    "base_energy_cost": { "math": [ "( 66 * var_kokoro_happiness_mod )" ] },
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ],
    "//": "dur 600 - 2400",
    "//2": "melancholy mod adds between +33 and +66% duration"
  },
  {
    "id": "kokoro_spirit_naginata2",
    "type": "SPELL",
    "name": { "str": "Summon: Spirit naginata (item)" },
    "description": "Item spawn component of kokoro_spirit_naginata ",
    "spell_class": "NONE",
    "valid_targets": [ "none" ],
    "effect": "spawn_item",
    "effect_str": "kokoro_naginata",
    "shape": "blast",
    "min_duration": { "math": [ "( ( (u_skill('stabbing') * 90 ) + (u_skill('melee') * 90 ) + 240 ) * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 2400 * var_kokoro_melancholy_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "kokoro_throw_weapon",
    "type": "SPELL",
    "name": { "str": "Throw weapon" },
    "description": "<color_light_gray>Throw your wielded weapon at the target.  Weapon here being a broad term. \n<color_yellow>Warning:</color> Don't throw valuable or otherwise important items.</color>",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kokoro_throw_weapon_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": { "math": [ "( 100 * var_kokoro_happiness_mod )" ] },
    "base_energy_cost": { "math": [ "( 100 * var_kokoro_happiness_mod )" ] },
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "The initial idea was for her to get a short, big throw skill bonus, around x3 of the scaling above",
    "//2": "However, when testing with a broadsword, the total dmg is ~13 dmg, which is relatively very low",
    "//3": "I was going to just add bonus dmg on the next ranged attack, but idk if throwing items counts as ranged, and different dmg types require different spells, ranged event EOCs don't identify the target...",
    "//4": "Then I realized: instead of dealing with all that, why not just pull the dmg stats and apply the spell, then tp the weapon to the target's location. Which is what the EOC does"
  },
  {
    "id": "kokoro_throw_weapon2_bash",
    "type": "SPELL",
    "name": { "str": "Throw weapon (bash)" },
    "description": "Throw your weapon to the target.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "bash",
    "min_damage": { "math": [ "( var_melee_phys_dmg * 0.95 * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( var_melee_phys_dmg * 1.05 * var_kokoro_anger_mod )" ] },
    "min_range": { "math": [ "( ( max( (u_skill('melee') ), u_skill('dodge'), u_skill('throw') ) ) * 3 * var_kokoro_deter_aoe_mod )" ] },
    "max_range": { "math": [ "( 24 * var_kokoro_deter_aoe_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE" ],
    "//": "Total ~x1 weapon dmg ± 5% variance"
  },
  {
    "id": "kokoro_throw_weapon2_cut",
    "type": "SPELL",
    "name": { "str": "Throw weapon (cut)" },
    "description": "Throw your weapon to the target.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "cut",
    "min_damage": { "math": [ "( var_melee_phys_dmg * 0.95 * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( var_melee_phys_dmg * 1.05 * var_kokoro_anger_mod )" ] },
    "min_range": { "math": [ "( ( max( (u_skill('melee') ), u_skill('dodge'), u_skill('throw') ) ) * 3 * var_kokoro_deter_aoe_mod )" ] },
    "max_range": { "math": [ "( 24 * var_kokoro_deter_aoe_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE" ],
    "//": "Total ~x1 weapon dmg ± 5% variance"
  },
  {
    "id": "kokoro_throw_weapon2_stab",
    "type": "SPELL",
    "name": { "str": "Throw weapon (stab)" },
    "description": "Throw your weapon to the target.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "stab",
    "min_damage": { "math": [ "( var_melee_phys_dmg * 0.95 * var_kokoro_anger_mod )" ] },
    "max_damage": { "math": [ "( var_melee_phys_dmg * 1.05 * var_kokoro_anger_mod )" ] },
    "min_range": { "math": [ "( ( max( (u_skill('melee') ), u_skill('dodge'), u_skill('throw') ) ) * 3 * var_kokoro_deter_aoe_mod )" ] },
    "max_range": { "math": [ "( 24 * var_kokoro_deter_aoe_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE" ],
    "//": "Total ~x1 weapon dmg ± 5% variance"
  },
  {
    "id": "kokoro_unleash_emotion",
    "type": "SPELL",
    "name": { "str": "<color_white>Unleash emotion</color>" },
    "description": "<color_light_gray>Release the emotion of your current mask around you <color_light_red>(reduces instability)</color>.  \n<color_yellow>Warning:</color> This affects friendly and hostile targets alike.</color>",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "kokoro_unleash_emotion_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "kokoro_unleash_emotion0",
    "type": "SPELL",
    "name": { "str": "Unleash emotion (happiness)" },
    "description": "Release the emotion of your current mask around you (reduces instability).  Warning: this affects friendly and hostile targets alike.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "effect_str": "stunned",
    "extra_effects": [ { "id": "kokoro_unleash_emotion0_2" } ],
    "shape": "blast",
    "damage_type": "pure",
    "min_duration": { "math": [ "( ( (u_skill('melee') * 30 ) + (u_skill('dodge') * 30 ) + 60 ) * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 900 * var_kokoro_melancholy_mod )" ] },
    "min_aoe": { "math": [ "( ( (u_skill('melee') * 0.8 ) + (u_skill('dodge') * 0.8 ) + 1.6 ) * var_kokoro_deter_aoe_mod )" ] },
    "max_aoe": { "math": [ "( 24 * var_kokoro_deter_aoe_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "IGNORE_WALLS", "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "dur 300 - 900, aoe 8 - 24",
    "//2": "melancholy mod adds between +33 and +66% duration",
    "//3": "deter aoe mod adds between +20 and +33% aoe"
  },
  {
    "id": "kokoro_unleash_emotion0_2",
    "type": "SPELL",
    "name": { "str": "Unleash emotion (happiness) (extra)" },
    "description": "Self buff component for kokoro_unleash_emotion0 ",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "effect_str": "kokoro_unleash_happiness_effect",
    "shape": "blast",
    "damage_type": "pure",
    "min_duration": { "math": [ "( ( (u_skill('melee') * 30 ) + (u_skill('dodge') * 30 ) + 360 ) * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 1200 * var_kokoro_melancholy_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "dur 600 - 1200",
    "//2": "melancholy mod adds between +33 and +66% duration"
  },
  {
    "id": "kokoro_unleash_emotion1",
    "type": "SPELL",
    "name": { "str": "Unleash emotion (determination)" },
    "description": "Release the emotion of your current mask around you (reduces instability).  Warning: this affects friendly and hostile targets alike.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "effect_str": "kokoro_unleash_determination_effect",
    "extra_effects": [ { "id": "kokoro_unleash_emotion1_2" } ],
    "shape": "blast",
    "damage_type": "pure",
    "min_duration": { "math": [ "( ( (u_skill('melee') * 200 ) + (u_skill('dodge') * 200 ) + 400 ) * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 6000 * var_kokoro_melancholy_mod )" ] },
    "min_aoe": { "math": [ "( ( (u_skill('melee') * 0.8 ) + (u_skill('dodge') * 0.8 ) + 1.6 ) * var_kokoro_deter_aoe_mod )" ] },
    "max_aoe": { "math": [ "( 24 * var_kokoro_deter_aoe_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "dur 2000 - 6000, min aoe 8",
    "//2": "melancholy mod adds between +33 and +66% duration",
    "//3": "deter aoe mod adds between +20 and +33% aoe"
  },
  {
    "id": "kokoro_unleash_emotion1_2",
    "type": "SPELL",
    "name": { "str": "Unleash emotion (determination) (extra)" },
    "description": "Extra debuff for kokoro_unleash_emotion1 ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "effect_str": "downed",
    "shape": "blast",
    "damage_type": "pure",
    "min_duration": { "math": [ "( 600 * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 600 * var_kokoro_melancholy_mod )" ] },
    "min_aoe": { "math": [ "( ( (u_skill('melee') * 0.8 ) + (u_skill('dodge') * 0.8 ) + 1.6 ) * var_kokoro_deter_aoe_mod )" ] },
    "max_aoe": { "math": [ "( 24 * var_kokoro_deter_aoe_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "aoe 8 - 24",
    "//2": "deter aoe mod adds between +20 and +33% aoe"
  },
  {
    "id": "kokoro_unleash_emotion2",
    "type": "SPELL",
    "name": { "str": "Unleash emotion (melancholy)" },
    "description": "Release the emotion of your current mask around you (reduces instability).  Warning: this affects friendly and hostile targets alike.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "effect_str": "kokoro_unleash_melancholy_effect",
    "shape": "blast",
    "damage_type": "pure",
    "min_duration": { "math": [ "( ( (u_skill('melee') * 200 ) + (u_skill('dodge') * 200 ) + 400 ) * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 6000 * var_kokoro_melancholy_mod )" ] },
    "min_aoe": { "math": [ "( ( (u_skill('melee') * 0.8 ) + (u_skill('dodge') * 0.8 ) + 1.6 ) * var_kokoro_deter_aoe_mod )" ] },
    "max_aoe": { "math": [ "( 24 * var_kokoro_deter_aoe_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "IGNORE_WALLS", "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "dur 2000 - 6000, aoe 8 - 24",
    "//2": "melancholy mod adds between +33 and +66% duration",
    "//3": "deter aoe mod adds between +20 and +33% aoe"
  },
  {
    "id": "kokoro_unleash_emotion3",
    "type": "SPELL",
    "name": { "str": "Unleash emotion (anger)" },
    "description": "Release the emotion of your current mask around you (reduces instability).  Warning: this affects friendly and hostile targets alike.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "effect_str": "kokoro_unleash_anger_effect",
    "extra_effects": [ { "id": "kokoro_unleash_emotion3_2" } ],
    "shape": "blast",
    "damage_type": "pure",
    "min_dot": 2,
    "max_dot": 2,
    "min_duration": { "math": [ "( ( (u_skill('melee') * 150 ) + (u_skill('dodge') * 150 ) + 1800 ) * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 6000 * var_kokoro_melancholy_mod )" ] },
    "min_aoe": { "math": [ "( ( (u_skill('melee') * 0.8 ) + (u_skill('dodge') * 0.8 ) + 1.6 ) * var_kokoro_deter_aoe_mod )" ] },
    "max_aoe": { "math": [ "( 24 * var_kokoro_deter_aoe_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "IGNORE_WALLS", "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "dur 3000 - 6000 (dmg 40 - 100, see below), aoe 8 - 24",
    "//2": "melancholy mod adds between +33 and +66% duration",
    "//3": "deter aoe mod adds between +20 and +33% aoe"
  },
  {
    "id": "kokoro_unleash_emotion3_2",
    "type": "SPELL",
    "name": { "str": "Unleash emotion (anger) (extra)" },
    "description": "Balance component of kokoro_unleash_emotion3 . This reduces the dmg of the dot for 20 s, so it does 40 - 100 total dmg, instead of 60 - 120",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "pure",
    "min_dot": -1,
    "max_dot": -1,
    "min_duration": { "math": [ "( 2000 * var_kokoro_melancholy_mod )" ] },
    "max_duration": { "math": [ "( 2000 * var_kokoro_melancholy_mod )" ] },
    "min_aoe": { "math": [ "( ( (u_skill('melee') * 0.8 ) + (u_skill('dodge') * 0.8 ) + 1.6 ) * var_kokoro_deter_aoe_mod )" ] },
    "max_aoe": { "math": [ "( 24 * var_kokoro_deter_aoe_mod )" ] },
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "IGNORE_WALLS", "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "aoe 8 - 24",
    "//2": "deter aoe mod adds between +20 and +33% aoe"
  }
]
