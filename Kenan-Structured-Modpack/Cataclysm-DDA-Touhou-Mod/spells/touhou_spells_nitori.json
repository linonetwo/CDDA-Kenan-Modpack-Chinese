[
  {
    "id": "nitori_repair_spell",
    "type": "SPELL",
    "name": { "str": "Repair (spell)" },
    "description": "This is a hidden spell that runs from nitori_melee_attack_eoc when Nitori attacks a turret. It <color_light_green>heals</color> the turret in function of her weapon dmg at the moment",
    "valid_targets": [ "self" ],
    "shape": "blast",
    "effect": "attack",
    "damage_type": "pure",
    "min_damage": { "math": [ "( var_nitori_repair * 1.1 )" ] },
    "max_damage": { "math": [ "( var_nitori_repair * 2.0 )" ] },
    "min_pierce": 99,
    "max_pierce": 99,
    "max_level": 1,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_FAIL", "NO_HANDS", "NO_LEGS", "NO_PROJECTILE", "RANDOM_DAMAGE", "SILENT" ],
    "//note": "can this actually work?"
  },
  {
    "id": "nitori_aerialtorpedoes",
    "type": "SPELL",
    "name": { "str": "Aerial torpedoes" },
    "description": "Fire a bunch of aerial torpedoes over the targeted area.  The arc is high, so they land after some delay.  \nCosts 100 mana.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "nitori_aerialtorpedoes_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 100,
    "base_energy_cost": 150,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "nitori_aerialtorpedoes2",
    "type": "SPELL",
    "name": { "str": "Aerial torpedoes (dmg)" },
    "description": "Damage component of nitori_aerialtorpedoes ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "field", "ground", "hostile", "item", "self" ],
    "effect": "attack",
    "shape": "blast",
    "damage_type": "bash",
    "min_damage": { "math": [ "( (u_skill('mechanics') * 2.1 ) + (u_skill('fabrication') * 2.1 ) + 0.2 )" ] },
    "max_damage": 59,
    "min_pierce": { "math": [ "( (u_skill('mechanics') * 0.65 ) + (u_skill('fabrication') * 0.65 ) + 0.8 )" ] },
    "max_pierce": 19,
    "min_range": 20,
    "max_range": 20,
    "min_aoe": 4,
    "max_aoe": 4,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "min dmg 17 x3, min pierce 6"
  },
  {
    "id": "nitori_extendo_arm",
    "type": "SPELL",
    "name": { "str": "Extendo aaarm" },
    "description": "Use your Extendo arm v.4.2c to pull a nearby target or item.  \n<color_yellow>Warning:</color> May fail if used on unstable footing.  May fail if the target's mass is bigger than the user's.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "nitori_extendo_arm_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 66,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "nitori_extendo_arm_creature_spell",
    "type": "SPELL",
    "name": { "str": "Extendo aaarm (EOC)" },
    "description": "Forces the target to run the EOC to compare the weight between them and Nitori",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "hostile" ],
    "effect": "effect_on_condition",
    "effect_str": "nitori_extendo_arm_creature_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "nitori_extendo_arm_pull",
    "type": "SPELL",
    "name": { "str": "Extendo aaarm (pull)" },
    "description": "Pull version of nitori_extendo_arm ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile", "item" ],
    "effect": "directed_push",
    "shape": "blast",
    "min_damage": { "math": [ " - ( u_skill('mechanics') + 1 )" ] },
    "max_damage": { "math": [ " - ( u_skill('mechanics') + 1 )" ] },
    "max_level": 1,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "nitori_extendo_arm_self_pull",
    "type": "SPELL",
    "name": { "str": "Extendo aaarm (self-pull)" },
    "description": "Self-pull version of nitori_extendo_arm ",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ground", "hostile" ],
    "effect": "dash",
    "extra_effects": [ { "id": "dash_basic_levitate" } ],
    "shape": "line",
    "min_range": { "math": [ "( u_skill('mechanics') + 1 )" ] },
    "max_range": { "math": [ "( u_skill('mechanics') + 1 )" ] },
    "max_level": 1,
    "difficulty": -50,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "EXTRA_EFFECTS_FIRST", "NO_EXPLOSION_SFX", "NO_FAIL", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "nitori_extendo_arm2",
    "type": "SPELL",
    "name": { "str": "Extendo aaarm (stun)" },
    "description": "Stun component of nitori_extendo_arm . The target is forced to cast this by nitori_extendo_arm_check_creature_eoc . This is a qol buff so the targets don't immediately move again after Nitori casts the spell",
    "spell_class": "NONE",
    "valid_targets": [ "self" ],
    "effect": "mod_moves",
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": -100,
    "max_damage": -100,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "nitori_mechpunch",
    "type": "SPELL",
    "name": "Mechanical punch",
    "description": "Punch the target with your mechanical first, knocking them back a great distance.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "nitori_mechpunch2" } ],
    "shape": "line",
    "damage_type": "bash",
    "min_damage": { "math": [ "( (u_skill('mechanics') * 1.2 ) + (u_skill('fabrication') * 1.2 ) - 1.6 )" ] },
    "max_damage": 32,
    "min_range": 2,
    "max_range": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 50,
    "base_energy_cost": 100,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ],
    "//": "min dmg 8"
  },
  {
    "id": "nitori_mechpunch2",
    "type": "SPELL",
    "name": "Mechanical punch (stun)",
    "description": "Stun component for nitori_mechpunch . This is a qol buff so the targets don't immediately move again after the knockback",
    "spell_class": "NONE",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "directed_push",
    "extra_effects": [ { "id": "nitori_mechpunch3" } ],
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": -100,
    "max_damage": -100,
    "min_range": 2,
    "max_range": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "nitori_mechpunch3",
    "type": "SPELL",
    "name": "Mechanical punch (knockback)",
    "description": "Kick component of nitori_mechpunch ",
    "valid_targets": [ "hostile" ],
    "effect": "directed_push",
    "shape": "line",
    "damage_type": "bash",
    "min_damage": { "math": [ "( (u_skill('mechanics') * 0.25 ) + (u_skill('fabrication') * 0.25 ) + 1 )" ] },
    "max_damage": { "math": [ "( (u_skill('mechanics') * 0.65 ) + (u_skill('fabrication') * 0.65 ) - 2.2 )" ] },
    "min_range": 2,
    "max_range": 2,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "RANDOM_DAMAGE", "SILENT" ],
    "//": "dmg (3 - 8) - 16"
  },
  {
    "id": "nitori_opticalcamouflage",
    "type": "SPELL",
    "name": { "str": "Optical camouflage" },
    "description": "Turn ON your trusty Land camo device, granting you invisibility after a small delay.  Drains mana while active.  \n<color_yellow>Warning:</color> May randomly fail over the duration.  Has a small chance to completely turn OFF.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "nitori_opticalcamouflage_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 66,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "nitori_toolswing",
    "type": "SPELL",
    "name": { "str": "Tool swing" },
    "description": "Quickly swing your tool at an enemy.  Has a chance to knock it back.  \nRequires a tool (or similar enough weapon).",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "nitori_toolswing_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 66,
    "base_energy_cost": 66,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "nitori_toolswing_eoc2",
    "type": "SPELL",
    "name": { "str": "Tool swing" },
    "description": "Quickly swing your tool at an enemy.  Has a chance to knock it back.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "extra_effects": [ { "id": "nitori_toolswing_eoc2_2" } ],
    "shape": "line",
    "damage_type": "bash",
    "min_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('mechanics') * 0.09 ) + 0.74 ) ) * 0.95 )" ] },
    "max_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('mechanics') * 0.09 ) + 0.74 ) ) * 1.05 )" ] },
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//": "Deals x1.1 - 2 weapon dmg with ± 5% variance"
  },
  {
    "id": "nitori_toolswing_eoc2_2",
    "type": "SPELL",
    "name": { "str": "Tool swing (stun)" },
    "description": "Stun component for nitori_toolswing_eoc2 . This is a qol buff so the targets don't immediately move again after the knockback",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "mod_moves",
    "extra_effects": [ { "id": "nitori_toolswing_eoc2_3" } ],
    "shape": "blast",
    "damage_type": "pure",
    "min_damage": -100,
    "max_damage": -100,
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT" ]
  },
  {
    "id": "nitori_toolswing_eoc2_3",
    "type": "SPELL",
    "name": { "str": "Tool swing (knockback)" },
    "description": "Knockback component of nitori_toolswing_eoc2 ",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "directed_push",
    "shape": "cone",
    "damage_type": "pure",
    "min_damage": 1,
    "max_damage": 2,
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "SILENT", "RANDOM_DAMAGE" ]
  },
  {
    "id": "nitori_toolswing_eoc3",
    "type": "SPELL",
    "name": { "str": "Tool swing" },
    "description": "Quickly swing your tool at an enemy.  Has a chance to knock it back.",
    "spell_class": "NONE",
    "valid_targets": [ "ally", "ground", "hostile" ],
    "effect": "attack",
    "shape": "line",
    "damage_type": "bash",
    "min_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('mechanics') * 0.09 ) + 0.74 ) ) * 0.95 )" ] },
    "max_damage": { "math": [ "( ( var_melee_phys_dmg * ( (u_skill('mechanics') * 0.09 ) + 0.74 ) ) * 1.05 )" ] },
    "min_range": 1,
    "max_range": 1,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 0,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "RANDOM_DAMAGE", "SOMATIC" ],
    "//": "Deals x1.1 - 2 weapon dmg with ± 5% variance"
  },
  {
    "id": "nitori_turretdeploy",
    "type": "SPELL",
    "name": { "str": "Deploy: Kappa tech turret MK III.IV" },
    "description": "Deploy a turret that shoots nearby enemies with water.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "ground" ],
    "effect": "summon",
    "effect_str": "mon_kappa_turret",
    "shape": "blast",
    "min_damage": 1,
    "max_damage": 1,
    "min_range": 4,
    "max_range": 4,
    "min_duration": { "math": [ "( (u_skill('mechanics') * 7500 ) + (u_skill('fabrication') * 7500 ) - 30000 )" ] },
    "max_duration": 180000,
    "max_level": 1,
    "difficulty": -11,
    "base_casting_time": 166,
    "base_energy_cost": 66,
    "energy_source": "MANA",
    "flags": [ "NO_LEGS", "VERBAL" ],
    "//": "dur 5 - 30 min",
    "//SUPER_WIP": "This should consumer scrap, water, last forever (maybe with a *upgrade* spell?)"
  },
  {
    "id": "nitori_transformate",
    "type": "SPELL",
    "name": { "str": "<color_dark_gray>[𝚔]</color> Transformate" },
    "description": "Turn scrap into <color_dark_gray>kappascrap</color>",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "self" ],
    "components": "spell_components_kapparesource",
    "effect": "effect_on_condition",
    "effect_str": "nitori_transformate_eoc",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 150,
    "base_energy_cost": 0,
    "energy_source": "MANA",
    "flags": [ "NO_HANDS", "NO_LEGS", "SOMATIC" ]
  },
  {
    "id": "nitori_zz_kappascrap",
    "type": "SPELL",
    "name": "<color_dark_gray>[𝚔]</color> <color_dark_gray>Kappascrap</color>",
    "description": "You gain useful <color_dark_gray>kappascrap</color> by transformating human scrap and related pieces of technology, which you can use to craft and deploy kappa technology on the fly.  \n<color_light_blue>Casting Cost</color> displays how many you currently have.  \nMax 200 <color_dark_gray>kappascrap</color>.",
    "spell_class": "NONE",
    "teachable": false,
    "valid_targets": [ "none" ],
    "effect": "attack",
    "shape": "blast",
    "max_level": 1,
    "difficulty": -11,
    "message": "",
    "base_casting_time": 0,
    "base_energy_cost": { "math": [ "u_var_kappascrap" ] },
    "energy_source": "MANA",
    "flags": [ "NO_EXPLOSION_SFX", "NO_HANDS", "NO_LEGS", "NO_PROJECTILE", "SOMATIC", "SILENT" ],
    "//note": "Should be 'kappa precursor' or something like that"
  }
]
