[
  {
    "//": "TODO check text, write something not lame, balance him a bit maybe?",
    "type": "npc",
    "id": "NPC_wanderer_knight",
    "name_unique": "女骑士",
    "gender": "male",
    "name_suffix": "神圣者",
    "class": "NC_wanderer_knight",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_wanderer_knight_1",
    "faction": "no_faction",
    "mission_offered": "MISSION_wanderer_knight_1"
  },
  {
    "type": "npc_class",
    "id": "NC_wanderer_knight",
    "name": {
      "str": "Knight"
    },
    "job_description": "Wandering knight.",
    "common": false,
    "bonus_str": {
      "rng": [
        2,
        5
      ]
    },
    "bonus_dex": {
      "rng": [
        1,
        4
      ]
    },
    "bonus_int": {
      "rng": [
        1,
        4
      ]
    },
    "bonus_per": {
      "rng": [
        1,
        4
      ]
    },
    "worn_override": "NC_wanderer_knight_worn",
    "carry_override": "NC_wanderer_knight_carried",
    "weapon_override": "NC_wanderer_knight_weapon",
    "traits": [
      {
        "group": "NPC_starting_traits"
      },
      {
        "group": "Appearance_demographics"
      },
      {
        "trait": "OUTDOORSMAN"
      },
      {
        "trait": "PAINRESIST"
      }
    ],
    "skills": [
      {
        "skill": "dodge",
        "bonus": {
          "rng": [
            2,
            5
          ]
        }
      },
      {
        "skill": "melee",
        "bonus": {
          "rng": [
            2,
            5
          ]
        }
      },
      {
        "skill": "cutting",
        "bonus": {
          "rng": [
            2,
            5
          ]
        }
      }
    ]
  },
  {
    "type": "item_group",
    "id": "NC_wanderer_knight_worn",
    "subtype": "collection",
    "entries": [
      {
        "item": "armor_junk_lightplate"
      },
      {
        "item": "boots_plate"
      },
      {
        "item": "gloves_plate"
      },
      {
        "item": "helmet_barbute"
      },
      {
        "item": "backpack_leather"
      },
      {
        "item": "bscabbard"
      },
      {
        "item": "cloak"
      }
    ]
  },
  {
    "type": "item_group",
    "id": "NC_wanderer_knight_carried",
    "subtype": "collection",
    "entries": [
      {
        "item": "waterskin"
      },
      {
        "item": "meat_smoked"
      },
      {
        "item": "cheese_hard"
      },
      {
        "item": "brandy"
      }
    ]
  },
  {
    "type": "item_group",
    "id": "NC_wanderer_knight_weapon",
    "subtype": "collection",
    "entries": [
      {
        "item": "zweihander"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": [
      "TALK_wanderer_knight_1"
    ],
    "dynamic_line": {
      "npc_has_var": "wanderer_knight_truth",
      "type": "general",
      "context": "meeting",
      "value": "yes",
      "yes": "啊，获选者！您为何来到这个神圣的地方？",
      "no": {
        "npc_has_var": "wanderer_knight_trust",
        "type": "general",
        "context": "flag",
        "value": "yes",
        "yes": "啊，能在这个被诅咒的世界里看到另一个活着的魂灵，真是高兴。你为何来到这个神圣的地方？",
        "no": "嗯……"
      }
    },
    "responses": [
      {
        "text": "关于那个任务……",
        "condition": "has_assigned_mission",
        "trial": {
          "type": "CONDITION",
          "condition": {
            "or": [
              {
                "u_is_wearing": "holy_symbol_wood"
              },
              {
                "u_is_wearing": "holy_symbol"
              }
            ]
          }
        },
        "success": {
          "topic": "TALK_MISSION_INQUIRE"
        },
        "failure": {
          "topic": "TALK_wanderer_knight_nope"
        }
      },
      {
        "text": "<BGSS_intro_question>",
        "topic": "TALK_wanderer_knight_Background"
      },
      {
        "text": "需要帮忙么？",
        "condition": {
          "npc_has_var": "wanderer_knight_trust",
          "type": "general",
          "context": "flag",
          "value": "yes"
        },
        "trial": {
          "type": "CONDITION",
          "condition": {
            "or": [
              {
                "u_is_wearing": "holy_symbol_wood"
              },
              {
                "u_is_wearing": "holy_symbol"
              }
            ]
          }
        },
        "success": {
          "topic": "TALK_MISSION_LIST"
        },
        "failure": {
          "topic": "TALK_wanderer_knight_nope"
        },
        "switch": true
      },
      {
        "text": "需要帮忙么？",
        "topic": "TALK_wanderer_knight_trust_check",
        "switch": true
      },
      {
        "text": "你能教我点什么吗？",
        "topic": "TALK_wanderer_knight_teach_check"
      },
      {
        "text": "再见。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_trust_check",
    "dynamic_line": "你信教吗？",
    "responses": [
      {
        "text": "我是穆斯林。",
        "topic": "TALK_DONE",
        "opinion": {
          "trust": -200,
          "value": -200
        },
        "effect": "insult_combat"
      },
      {
        "text": "我是基督徒。",
        "trial": {
          "type": "CONDITION",
          "condition": {
            "or": [
              {
                "u_is_wearing": "holy_symbol_wood"
              },
              {
                "u_is_wearing": "holy_symbol"
              }
            ]
          }
        },
        "success": {
          "topic": "TALK_wanderer_knight_trust_yes"
        },
        "failure": {
          "topic": "TALK_wanderer_knight_trust_nope"
        }
      },
      {
        "text": "我是佛教徒",
        "topic": "TALK_wanderer_knight_trust_no"
      },
      {
        "text": "我是犹太教徒",
        "topic": "TALK_wanderer_knight_trust_no"
      },
      {
        "text": "我是无神论者。",
        "topic": "TALK_wanderer_knight_trust_no"
      },
      {
        "text": "我是不可知论者。",
        "topic": "TALK_wanderer_knight_trust_no"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_trust_no",
    "dynamic_line": "*慢慢地摇摇头",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_trust_yes",
    "dynamic_line": {
      "concatenate": [
        "Ah, it's good to see another follower of our lord Jesus Christ. Welcome, my ",
        {
          "u_male": true,
          "yes": "brother.",
          "no": "sister."
        }
      ]
    },
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": [
          {
            "npc_add_var": "wanderer_knight_trust",
            "type": "general",
            "context": "flag",
            "value": "yes"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_Background",
    "dynamic_line": "我是上帝真正的战士！每当我看到一个恶魔，我就和它战斗！我被召唤到这片土地来清除它的污秽！人类用罪恶掩盖了自己，现在他们付出了代价！但我一辈子都尽可能的纯洁和无罪，上帝救了我脱离了行尸走肉的诅咒！",
    "responses": [
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_NONE"
      },
      {
        "text": "你确定你说的是实话吗？",
        "condition": {
          "not": {
            "npc_has_var": "wanderer_knight_background",
            "type": "general",
            "context": "meeting",
            "value": "yes"
          }
        },
        "trial": {
          "type": "PERSUADE",
          "difficulty": 8
        },
        "success": {
          "topic": "TALK_wanderer_knight_truth"
        },
        "failure": {
          "topic": "TALK_wanderer_knight_lie"
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_teach_check",
    "dynamic_line": "我只教那些帮助有需要的神圣战士的人。你有帮助那些需要帮助的神圣战士吗？",
    "responses": [
      {
        "text": "是的，我哥哥。",
        "condition": {
          "npc_has_var": "u_helped_wanderer_knight",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        },
        "trial": {
          "type": "CONDITION",
          "condition": {
            "npc_has_var": "wanderer_knight_teach",
            "type": "general",
            "context": "meeting",
            "value": "yes"
          }
        },
        "success": {
          "effect": [
            {
              "u_spawn_item": "manual_swordsmanship"
            },
            {
              "npc_lose_var": "wanderer_knight_teach",
              "type": "general",
              "context": "meeting"
            }
          ],
          "topic": "TALK_wanderer_knight_teach"
        },
        "failure": {
          "topic": "TALK_wanderer_knight_teach_done"
        }
      },
      {
        "text": "下次再说吧。",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_teach",
    "dynamic_line": {
      "concatenate": [
        "I learned all from this book. You can take it.  God bless you, my ",
        {
          "u_male": true,
          "yes": "brother!",
          "no": "sister!"
        }
      ]
    },
    "responses": [
      {
        "text": "谢谢你，神圣的战士。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_teach_done",
    "dynamic_line": "我已经把我知道的都教给你了。",
    "responses": [
      {
        "text": "再次感谢，神圣的战士。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_truth",
    "dynamic_line": "好吧，说实话，我只是一个会穿酷西装的人…这是我从博物馆拿的，用来在<the_cataclysm>发生的时候保护我自己，在安顿下来后，我开始认为自己是神圣的战士，被派到这里来净化丧尸世界…请不要评判我…",
    "responses": [
      {
        "text": "好吧，好吧，我一起玩。但前提是你开始叫我“被选中的人”！[*咯咯笑*]",
        "topic": "TALK_wanderer_knight_1",
        "effect": [
          {
            "npc_add_var": "wanderer_knight_background",
            "type": "general",
            "context": "meeting",
            "value": "yes"
          },
          {
            "npc_add_var": "wanderer_knight_background_truth",
            "type": "general",
            "context": "meeting",
            "value": "yes"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_lie",
    "dynamic_line": "你怎么敢说那样的话！！！",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": [
          {
            "npc_add_var": "wanderer_knight_background",
            "type": "general",
            "context": "meeting",
            "value": "yes"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_wanderer_knight_nope",
    "dynamic_line": {
      "u_male": true,
      "yes": "你的十字架在哪里，我的兄弟？",
      "no": "你的十字架在哪里，我妹妹？"
    },
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "id": "MISSION_wanderer_knight_1",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "证明你是真正的光之战士"
    },
    "description": "骑士要求你通过杀死100个丧尸来证明你是真正的光之战士。",
    "goal": "MGOAL_KILL_MONSTER_SPEC",
    "monster_species": "ZOMBIE",
    "monster_kill_goal": 100,
    "difficulty": 0,
    "value": 1000,
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_wanderer_knight_2",
    "dialogue": {
      "describe": "-",
      "offer": "看看外面，告诉我你看到了什么。我看见瘟疫，瘟疫在另一个瘟疫上，那瘟疫被送到我们的世界去，要把它从罪恶中除掉。如果你想帮助我抗击这场瘟疫，并将这个世界从瘟疫中清除，我想让你向我证明你是真正的光之战士。杀死100个丧尸然后回到我身边。",
      "accepted": "我会等的。",
      "rejected": "你是什么异教徒？！",
      "advice": "上帝保佑你！",
      "inquire": "我会一直在这里等你。",
      "success": "很高兴看到另一个光明战士。我很高兴看到你成功地完成了这项任务。",
      "success_lie": "嗯…",
      "failure": "真可惜。"
    }
  },
  {
    "id": "MISSION_wanderer_knight_2",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "帮助兰多夫神父"
    },
    "description": "奈特让你帮伦道夫神父解除诅咒。",
    "goal": "MGOAL_KILL_MONSTER",
    "difficulty": 0,
    "value": 100,
    "start": {
      "assign_mission_target": {
        "om_terrain": "church",
        "om_terrain_replace": "house",
        "om_terrain_match_type": "PREFIX",
        "reveal_radius": 1,
        "random": true,
        "search_range": 100,
        "min_distance": 5
      },
      "update_mapgen": {
        "place_monster": [
          {
            "monster": "mon_zombie_tough",
            "name": "Father Randalf",
            "x": 3,
            "y": 9,
            "target": true
          }
        ]
      }
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_wanderer_knight_3",
    "dialogue": {
      "describe": "-",
      "offer": "啊，我的伙伴，光明的战士，太好了，你还活着。我还有一个任务要交给你。你得帮帮我亲爱的兄弟伦道夫，解除他的诅咒，让他的灵魂回归天堂，永远安息。",
      "accepted": "我会等的。",
      "rejected": "你是什么异教徒？！",
      "advice": "我知道你能行！上帝保佑你！",
      "inquire": "嗯……",
      "success": "啊，真是松了一口气！你做得很好，我的<name_g>。",
      "success_lie": "嗯…",
      "failure": "真可惜。"
    }
  },
  {
    "id": "MISSION_wanderer_knight_3",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "寻找圣遗物"
    },
    "description": "奈特要你找到特别的遗物，几个世纪前住在这片土地上的某个牧师的遗骸。",
    "goal": "MGOAL_FIND_ITEM",
    "difficulty": 0,
    "value": 100,
    "//": "TODO add special relic",
    "start": {
      "assign_mission_target": {
        "om_terrain": "lab_surface_brick_blockC2",
        "om_special": "lab_surface_big",
        "om_terrain_replace": "field",
        "reveal_radius": 2,
        "search_range": 200,
        "min_distance": 50
      },
      "update_mapgen": {
        "om_terrain": "lab_surface_brick_block2A0",
        "place_item": [
          {
            "item": "small_relic",
            "x": 106,
            "y": 46,
            "target": true
          }
        ]
      }
    },
    "end": {
      "effect": [
        {
          "npc_add_var": "u_helped_wanderer_knight",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        },
        {
          "npc_add_var": "wanderer_knight_teach",
          "type": "general",
          "context": "meeting",
          "value": "yes"
        }
      ]
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "啊，又是你。我还有一个任务给你。你知道吗？这座教堂建于287年前，至今仍然屹立不倒，更有趣的是，这座教堂是全靠一个人建造的！一位牧师筑起了这座教堂，而他也称为圣徒，因为他坚定的意志、纯洁的心灵和对上帝的爱。这还没完，我从现任（可惜已经去世）牧师的笔记中得知，他的遗体之前保存在地下室，但最近被一些研究员带走，想要揭开他治疗能力的奥秘。我要你找回他的遗体。",
      "accepted": "我会等的。",
      "rejected": "你是什么异教徒？！",
      "advice": "我不知道你会面对什么，但是上帝会帮助你的！",
      "inquire": "我会一直在这里等你。",
      "success": "啊，太棒了！",
      "success_lie": "嗯…",
      "failure": "真可惜。"
    }
  }
]