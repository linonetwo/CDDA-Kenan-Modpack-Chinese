[
  {
    "//": "TODO check all, change transmitters code",
    "type": "npc",
    "id": "NPC_scientist_22ch",
    "name_suffix": "科学家",
    "class": "NC_scientist_22ch",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_scientist_22ch_1",
    "faction": "no_faction",
    "mission_offered": "MISSION_scientist_22ch_1"
  },
  {
    "type": "npc_class",
    "id": "NC_scientist_22ch",
    "name": {
      "str": "Scientist 22ch"
    },
    "job_description": "Scientist 22ch.",
    "common": false,
    "bonus_str": {
      "rng": [
        2,
        4
      ]
    },
    "bonus_dex": {
      "rng": [
        2,
        4
      ]
    },
    "bonus_int": {
      "rng": [
        1,
        2
      ]
    },
    "bonus_per": {
      "rng": [
        1,
        2
      ]
    },
    "worn_override": "NC_lead_scientist_22ch_worn",
    "traits": [
      {
        "group": "Appearance_SouthAsian"
      },
      {
        "trait": "PAINRESIST"
      }
    ],
    "skills": [
      {
        "skill": "melee",
        "bonus": {
          "rng": [
            2,
            6
          ]
        }
      },
      {
        "skill": "unarmed",
        "bonus": {
          "rng": [
            2,
            6
          ]
        }
      },
      {
        "skill": "dodge",
        "bonus": {
          "rng": [
            2,
            6
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_scientist_22ch_1",
    "dynamic_line": "*看起来很忙",
    "responses": [
      {
        "text": "那家伙派我来的。",
        "topic": "TALK_MISSION_LIST",
        "condition": {
          "u_has_var": "general_meeting_lead_scientist_22ch_need_time",
          "value": "yes"
        },
        "effect": [
          {
            "npc_add_var": "general_meeting_scientist_22ch_transmitter",
            "value": "0"
          },
          {
            "u_add_var": "general_meeting_scientist_22ch_working",
            "value": "yes"
          },
          {
            "npc_first_topic": "TALK_scientist_22ch_2"
          }
        ]
      },
      {
        "text": "…",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "//": "TODO don't forget to change location for 'We're home' after creating them special basement",
    "type": "talk_topic",
    "id": "TALK_scientist_22ch_2",
    "dynamic_line": "你的命令是什么？",
    "responses": [
      {
        "text": "我们到了。把它放好。",
        "condition": "mission_complete",
        "trial": {
          "type": "CONDITION",
          "condition": {
            "not": {
              "npc_has_var": "flag_meeting_scientist_22ch_transmitter",
              "value": "4"
            }
          }
        },
        "success": {
          "topic": "TALK_scientist_22ch_good",
          "effect": [
            {
              "mapgen_update": "22ch_transmitter",
              "origin_npc": true
            },
            {
              "math": [
                "n_flag_meeting_scientist_22ch_transmitter",
                "++"
              ]
            }
          ]
        },
        "failure": {
          "topic": "TALK_scientist_22ch_done"
        }
      },
      {
        "text": "我们到家了。",
        "topic": "TALK_scientist_22ch_home",
        "condition": {
          "and": [
            {
              "npc_at_om_location": "cabin_basement_test"
            },
            {
              "npc_has_var": "flag_meeting_scientist_22ch_transmitter",
              "value": "4"
            }
          ]
        }
      },
      {
        "text": "跟随我。",
        "topic": "TALK_DONE",
        "effect": "follow_only"
      },
      {
        "text": "在这里等我。",
        "topic": "TALK_DONE",
        "effect": [
          "assign_guard",
          {
            "npc_first_topic": "TALK_scientist_22ch_2"
          }
        ]
      },
      {
        "text": "算了。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_scientist_22ch_good",
    "dynamic_line": "我受够了。我们走吧。",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": [
          "mission_success",
          "clear_mission",
          "assign_mission"
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_scientist_22ch_done",
    "dynamic_line": "最后一个。让我们回到我们的人身边。",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": [
          "follow_only",
          {
            "mapgen_update": "22ch_transmitter_done",
            "origin_npc": true,
            "offset_z": -7
          },
          "mission_success",
          {
            "u_lose_var": "general_meeting_lead_scientist_22ch_need_time"
          },
          {
            "u_add_var": "general_meeting_lead_scientist_22ch_finished",
            "value": "yes"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_scientist_22ch_home",
    "dynamic_line": "嗯，那很有趣。谢谢你的搭车。",
    "responses": [
      {
        "text": "我很高兴一切都结束了。",
        "topic": "TALK_DONE",
        "effect": [
          "stop_following",
          "end_conversation"
        ]
      }
    ]
  },
  {
    "id": "MISSION_scientist_22ch_1",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "放置发射器"
    },
    "description": "帮助科学家放置发射器",
    "goal": "MGOAL_GO_TO",
    "destination": "radio_tower_top",
    "difficulty": 0,
    "value": 100,
    "start": {
      "assign_mission_target": {
        "om_terrain": "radio_tower",
        "om_special": "Radio Tower",
        "om_terrain_replace": "field",
        "search_range": 180,
        "min_distance": 75,
        "cant_see": true,
        "offset_z": 6
      }
    },
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "followup": "MISSION_scientist_22ch_1",
    "dialogue": {
      "describe": "-",
      "offer": "帮我把5个发射器放在5个无线电发射塔上。",
      "accepted": "很好。我在后面等你。",
      "rejected": "为什么？",
      "advice": "请保护我。",
      "inquire": "-",
      "success": "-",
      "success_lie": "-",
      "failure": "-"
    }
  }
]