[
  {
    "type": "npc",
    "id": "NPC_Rosalyn_Hartley",
    "name_unique": "罗莎琳·哈特利",
    "gender": "female",
    "class": "NC_Rosalyn_Hartley",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_Rosalyn_Hartley_1",
    "faction": "Hartley_family",
    "mission_offered": "MISSION_Rosalyn_Hartley_0"
  },
  {
    "type": "npc_class",
    "id": "NC_Rosalyn_Hartley",
    "name": {
      "str": "Rosalyn Hartley"
    },
    "common": false,
    "carry_override": "EMPTY_GROUP",
    "weapon_override": "EMPTY_GROUP",
    "job_description": "I'm just wandering.",
    "traits": [
      {
        "trait": "BGSS_Rosalyn_Hartley"
      },
      {
        "group": "NPC_starting_traits"
      },
      {
        "group": "Appearance_Germanic"
      }
    ],
    "skills": [
      {
        "skill": "ALL",
        "level": {
          "mul": [
            {
              "one_in": 3
            },
            {
              "sum": [
                {
                  "dice": [
                    4,
                    2
                  ]
                },
                {
                  "rng": [
                    -4,
                    -1
                  ]
                }
              ]
            }
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_Rosalyn_Hartley_1",
    "dynamic_line": {
      "u_has_var": "Barrett_Hartley_dead",
      "type": "flag",
      "context": "death",
      "value": "yes",
      "yes": "爸爸…",
      "no": {
        "u_has_mission": "MISSION_Barrett_Hartley_1",
        "yes": "我很害怕。我爸爸在哪？",
        "no": "我害怕…"
      }
    },
    "speaker_effect": {
      "sentinel": "met",
      "effect": "assign_mission"
    },
    "responses": [
      {
        "text": "跟我来，我带你去找你爸爸。",
        "topic": "TALK_DONE",
        "condition": {
          "not": "npc_following"
        },
        "effect": "follow_only",
        "switch": true
      },
      {
        "text": "我们很安全。",
        "topic": "TALK_Rosalyn_Hartley_safe",
        "condition": {
          "and": [
            {
              "u_has_mission": "MISSION_Barrett_Hartley_3"
            },
            {
              "npc_at_om_location": "evac_center_18"
            }
          ]
        },
        "effect": [
          "stop_following",
          {
            "u_add_var": "Rosalyn_Hartley_safe",
            "type": "flag",
            "context": "safe",
            "value": "yes"
          },
          {
            "npc_first_topic": "TALK_Rosalyn_Hartley_safe"
          }
        ]
      },
      {
        "text": "这些人会照顾你的。对他们好一点。",
        "topic": "TALK_Rosalyn_Hartley_safe_alone",
        "condition": {
          "u_has_var": "Rosalyn_Hartley_alone",
          "type": "flag",
          "context": "alone",
          "value": "no"
        },
        "switch": true
      },
      {
        "text": "对不起……",
        "topic": "TALK_Rosalyn_Hartley_father_dead",
        "condition": {
          "u_has_var": "Barrett_Hartley_dead",
          "type": "flag",
          "context": "death",
          "value": "yes"
        },
        "switch": true
      },
      {
        "text": "一起走吧。",
        "topic": "TALK_DONE",
        "switch": true
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_Rosalyn_Hartley_father_dead",
    "dynamic_line": "*哭声",
    "responses": [
      {
        "text": "也许你想和我一起旅行？",
        "trial": {
          "type": "PERSUADE",
          "difficulty": 25
        },
        "success": {
          "topic": "TALK_Rosalyn_Hartley_follow"
        },
        "failure": {
          "topic": "TALK_Rosalyn_Hartley_follow_no"
        }
      },
      {
        "text": "别担心。我带你去安全的地方。去疏散中心。",
        "topic": "TALK_DONE",
        "effect": [
          {
            "u_lose_var": "Barrett_Hartley_dead",
            "type": "flag",
            "context": "death"
          },
          {
            "u_add_var": "Rosalyn_Hartley_alone",
            "type": "flag",
            "context": "alone",
            "value": "yes"
          },
          {
            "npc_add_var": "alone",
            "type": "time",
            "context": "time_alone",
            "time": true
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_Rosalyn_Hartley_follow",
    "dynamic_line": "嗯，我没有人了，所以…",
    "responses": [
      {
        "text": "<end_talking>",
        "topic": "TALK_DONE",
        "effect": [
          "follow",
          "mission_success",
          "clear_mission"
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_Rosalyn_Hartley_follow_no",
    "dynamic_line": "*哭得更多",
    "responses": [
      {
        "text": "好吧，好吧，我带你去安全的地方。去疏散中心。",
        "topic": "TALK_DONE",
        "effect": [
          {
            "u_lose_var": "Barrett_Hartley_dead",
            "type": "flag",
            "context": "death"
          },
          {
            "u_add_var": "Rosalyn_Hartley_alone",
            "type": "flag",
            "context": "alone",
            "value": "yes"
          },
          {
            "npc_add_var": "alone",
            "type": "time",
            "context": "time_alone",
            "time": true
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_Rosalyn_Hartley_safe",
    "dynamic_line": "嗯，谢了！",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": [
          "stop_following",
          {
            "npc_first_topic": "TALK_Rosalyn_Hartley_evac_lobby"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_Rosalyn_Hartley_safe_alone",
    "dynamic_line": "谢谢你…",
    "responses": [
      {
        "text": "…",
        "topic": "TALK_DONE",
        "effect": [
          "mission_success",
          "clear_mission",
          "stop_following",
          {
            "npc_first_topic": "TALK_Rosalyn_Hartley_adopted"
          }
        ]
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_Rosalyn_Hartley_evac_lobby",
    "dynamic_line": {
      "u_has_var": "Barrett_Hartley_dead",
      "type": "flag",
      "context": "death",
      "value": "yes",
      "yes": "我爸爸在哪？",
      "no": {
        "u_has_mission": "MISSION_Barrett_Hartley_4",
        "yes": "你要带我父亲去哪里？",
        "no": "我不喜欢这里…"
      }
    },
    "speaker_effect": {
      "sentinel": "safe",
      "condition": {
        "u_has_var": "u_helped_Barrett_Hartley",
        "type": "flag",
        "context": "end",
        "value": "yes"
      },
      "effect": [
        "mission_success",
        "clear_mission"
      ]
    },
    "responses": [
      {
        "truefalsetext": {
          "true": "Don't worry, I'll return your father back to you soon.",
          "false": "…",
          "condition": {
            "u_has_mission": "MISSION_Barrett_Hartley_4"
          }
        },
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "//": "Add more dialogues maybe? That will open after some time",
    "type": "talk_topic",
    "id": "TALK_Rosalyn_Hartley_adopted",
    "dynamic_line": "你好…",
    "responses": [
      {
        "text": "你还好吗？",
        "topic": "TALK_Rosalyn_Hartley_adopted_hay"
      },
      {
        "text": "我很高兴你没事。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "//": "Add more dialogues maybe? That will open after some time",
    "type": "talk_topic",
    "id": "TALK_Rosalyn_Hartley_adopted_hay",
    "dynamic_line": "我很好，谢谢你没有忘记我…",
    "responses": [
      {
        "text": "我很高兴你没事。",
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "id": "MISSION_Rosalyn_Hartley_0",
    "type": "mission_definition",
    "has_generic_rewards": false,
    "name": {
      "str": "你见过罗莎琳·哈特利"
    },
    "description": "她看起来像个好女孩。",
    "goal": "MGOAL_CONDITION",
    "goal_condition": {
      "and": [
        {
          "u_has_var": "Rosalyn_Hartley_alone",
          "type": "flag",
          "context": "alone",
          "value": "yes"
        },
        {
          "not": {
            "math": [ "time_since(npc_time_time_alone_alone)", "<", "time('1 d')" ]
          }
        }
      ]
    },
    "difficulty": 0,
    "value": 0,
    "origins": [
      "ORIGIN_SECONDARY"
    ],
    "dialogue": {
      "describe": "-",
      "offer": "-",
      "accepted": "-",
      "rejected": "-",
      "advice": "-",
      "inquire": "-",
      "success": "-",
      "success_lie": "-",
      "failure": "-"
    },
    "fail": {
      "effect": [
        {
          "u_lose_var": "Rosalyn_Hartley_alone",
          "type": "flag",
          "context": "alone"
        },
        {
          "u_add_var": "Rosalyn_Hartley_dead",
          "type": "flag",
          "context": "death",
          "value": "yes"
        }
      ]
    }
  }
]