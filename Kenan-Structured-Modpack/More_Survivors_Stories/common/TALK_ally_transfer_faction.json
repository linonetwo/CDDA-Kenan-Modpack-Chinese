[
  {
    "type": "talk_topic",
    "id": "TALK_ALLY_ORDERS",
    "responses": [
      {
        "text": "你觉得调到另一个派系怎么样？",
        "topic": "TALK_ally_transfer"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_ally_transfer",
    "dynamic_line": {
      "concatenate": [
        "So, I can transfer to:",
        {
          "u_has_var": "flag_transfer_ally_transfer_js",
          "value": "yes",
          "yes": "  Jerry's squad."
        },
        {
          "u_has_var": "flag_transfer_ally_transfer_fs",
          "value": "yes",
          "yes": "  Forest Snakes."
        },
        "  Where do you want me to go?"
      ]
    },
    "responses": [
      {
        "text": "你觉得杰瑞的队伍怎么样？",
        "topic": "TALK_ally_transfer_jerry_squad",
        "condition": {
          "and": [
            {
              "math": [
                "u_flag_goons_jerry_goons",
                "<",
                "2"
              ]
            },
            {
              "u_has_var": "flag_transfer_ally_transfer_js",
              "value": "yes"
            }
          ]
        }
      },
      {
        "text": "你觉得森林蛇怎么样？",
        "topic": "TALK_ally_transfer_forest_snakes",
        "condition": {
          "and": [
            {
              "u_has_var": "flag_transfer_ally_transfer_fs",
              "value": "yes"
            }
          ]
        }
      },
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_NONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_ally_transfer_forest_snakes",
    "dynamic_line": "森林蛇听起来很酷！如果你确定的话，带我去见他们的首领，这样他就可以接受我了。",
    "responses": [
      {
        "text": "是的，森林蛇需要你。现在走吧。",
        "topic": "TALK_DONE",
        "condition": {
          "or": [
            {
              "npc_at_om_location": "bandit_camp_1"
            },
            {
              "npc_at_om_location": "bandit_camp_2"
            },
            {
              "npc_at_om_location": "bandit_camp_3"
            },
            {
              "npc_at_om_location": "bandit_camp_4"
            }
          ]
        },
        "effect": [
          "leave",
          {
            "npc_change_faction": "forest_snakes"
          },
          "assign_guard",
          {
            "npc_first_topic": "TALK_FOREST_SNAKES"
          },
          {
            "math": [
              "u_count_bandits_forest_snakes",
              "++"
            ]
          },
          {
            "npc_add_var": "flag_transfered_ally_transfered",
            "value": "fs"
          }
        ]
      },
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_FRIEND"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_ally_transfer_jerry_squad",
    "dynamic_line": "杰瑞的队伍听起来很酷！如果你确定的话，带我去见他们的首领，这样他就可以接受我了。",
    "responses": [
      {
        "text": "是的，杰瑞需要你。现在走吧。",
        "topic": "TALK_DONE",
        "condition": {
          "and": [
            {
              "npc_at_om_location": "shelter_vandal"
            },
            {
              "u_has_var": "flag_transfer_ally_transfer_js",
              "value": "yes"
            }
          ]
        },
        "effect": [
          "leave",
          {
            "npc_change_faction": "jerry_squad"
          },
          "assign_guard",
          {
            "npc_first_topic": "TALK_Jerry_Bumpkin_GOON"
          },
          {
            "math": [
              "u_flag_goons_jerry_goons",
              "++"
            ]
          },
          {
            "npc_add_var": "flag_transfered_ally_transfered",
            "value": "js"
          }
        ]
      },
      {
        "text": "<done_conversation_section>",
        "topic": "TALK_FRIEND"
      }
    ]
  }
]